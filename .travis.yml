sudo: required
dist: trusty

language: python

python:
    - "3.5"

env:
    - secure: "NULL"

cache:
    - pip

git:
    submodules: false

before_install:
    - sed -i 's/git@github.com:/https:\/\/github.com\//' .gitmodules
    - git submodule update --init --recursive

install:
    - sudo apt-get install subversion
    - sudo pip install pelican jinja2 py3babel babel beautifulsoup4 markdown nbconvert ghp-import pyembed rst
    - pelican --version

script:
    - git config --global user.email "$GIT_EMAIL"
    - git config --global user.name "$GIT_NAME"
    - git config --global push.default simple
    - rm -r themes plugins
    - mkdir themes plugins
    - ls *
    - svn export https://github.com/peijunz/pelican-themes/trunk/pelican-bootstrap3 themes/pelican-bootstrap3 --quiet
    - git clone --depth=1 https://github.com/peijunz/pelican-plugins plugins
    - cd plugins
    - git submodule update --init pelican-toc
    - git submodule update --init ipynb2pelican
    - cd ..
    - make github



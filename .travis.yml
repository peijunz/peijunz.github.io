sudo: required
dist: trusty

language: python

python:
    - "3.5"

env:
    - secure: "Hl7Mg82Li3e+rPRsll4dH1HgLvJKtJH2RASi/qX/lGsMALzsROJDYTJoTa2LHsFM46bbX+hp2zVCUs6o++S4sRTvOk50YnJUN0b3eqN/FmUbLs5ba7Y49QAoxbTduShTKxtmrkA3wizqTIS/TSCwrjtlt4Io/9PKz3g1Y+1SSDI="

cache:
    - pip

before_install:
    - sudo apt-get 

git:
    submodules: false

before_install:
    - sed -i 's/git@github.com:/https:\/\/github.com\//' .gitmodules
    - git submodule update --init --recursive

install:
    - sudo pip install pelican jinja2 py3babel babel beautifulsoup4 markdown nbconvert subversion
    - pelican --version

script:
    - git config --global user.email "$GIT_EMAIL"
    - git config --global user.name "$GIT_NAME"
    - git config --global push.default simple
    - mkdir themes
    - svn export https://github.com/peijunz/pelican-themes/trunk/pelican-bootstrap3 themes/pelican-bootstrap3
    - git clone --depth=1 https://github.com/peijunz/pelican-plugins plugins
    - cd plugins
    - git submodule update --init pelican-toc;\
    - git submodule update --init ipynb2pelican;\
    - cd ..
    - make github



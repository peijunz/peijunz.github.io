<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>ipynb2pelican Plugin released! - Peijun's Journal</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#ffffff">


    <link href="https://www.peijun.me//static/binary.png" rel="icon">

<link rel="canonical" href="https://www.peijun.me/ipynb-plugin.html">

        <meta name="author" content="Peijun Zhu" />
        <meta name="keywords" content="pelican,python,jupyter" />
        <meta name="description" content="Yet another Pelican Plugin for blogging with Jupyter Notebooks using MetaCell to store metadata. Thanks to super cow power of python, we can finally publish ipynb easily! Below is the README.md from the project at this time." />

        <meta property="og:site_name" content="Peijun's Journal" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="ipynb2pelican Plugin released!"/>
        <meta property="og:url" content="https://www.peijun.me/ipynb-plugin.html"/>
        <meta property="og:description" content="Yet another Pelican Plugin for blogging with Jupyter Notebooks using MetaCell to store metadata. Thanks to super cow power of python, we can finally publish ipynb easily! Below is the README.md from the project at this time."/>
        <meta property="article:published_time" content="2017-03-27" />
            <meta property="article:section" content="Computer" />
            <meta property="article:tag" content="pelican" />
            <meta property="article:tag" content="python" />
            <meta property="article:tag" content="jupyter" />
            <meta property="article:author" content="Peijun Zhu" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://www.peijun.me/theme/css/bootstrap.cosmo.min.css" type="text/css"/>
    <link href="https://www.peijun.me/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://www.peijun.me/theme/css/pygments/default.css" rel="stylesheet">
    <link href="https://www.peijun.me/theme/tipuesearch/tipuesearch.css" rel="stylesheet">
    <link rel="stylesheet" href="https://www.peijun.me/theme/css/style.css" type="text/css"/>
        <link href="https://www.peijun.me/static/css/custom.css" rel="stylesheet">

        <link href="https://www.peijun.me/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Peijun's Journal ATOM Feed"/>




</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://www.peijun.me/" class="navbar-brand">
Peijun's Journal            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                    <li><a href="/archives.html">Archives</a></li>
                    <li><a href="/categories.html">Categories</a></li>
                    <li><a href="/tags.html">Tags</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><span>
                <form class="navbar-search" action="https://www.peijun.me/search.html">
                  <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input" required>
                </form></span>
              </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<!-- Banner -->
<!-- End Banner -->

<!-- Content Container -->
<div class="container">
    <div class="row">
        <div class="col-md-10 col-md-offset-1">
            <ol class="breadcrumb">
                <li><a href="https://www.peijun.me/categories.html" title="Peijun's Journal"><i class="fa fa-home fa-lg"></i></a></li>
                <li><a href="https://www.peijun.me/category/computer.html" title="Computer">Computer</a></li>
                <li class="active">ipynb2pelican Plugin released!</li>
            </ol>
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://www.peijun.me/ipynb-plugin.html"
                       rel="bookmark"
                       title="Permalink to ipynb2pelican Plugin released!">
                        ipynb2pelican Plugin released!
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2017-03-27T00:00:00-04:00"> Mon, 27 Mar 2017</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="https://www.peijun.me/tag/pelican.html">pelican</a>
        /
	<a href="https://www.peijun.me/tag/python.html">python</a>
        /
	<a href="https://www.peijun.me/tag/jupyter.html">jupyter</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Yet another Pelican Plugin for blogging with Jupyter Notebooks using MetaCell to store metadata.</p>
<p>Thanks to super cow power of python, we can finally publish ipynb easily! Below is the README.md from the project at this time.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <a href="https://github.com/peijunz/ipynb2pelican">ipynb2pelican</a> plugin provides markup for Jupyter/IPython notebooks in pelican, so <code>.ipynb</code> files are recognized as a valid filetype for an article.</p>
<h2 id="MetaCell"><a class="anchor-link" href="#MetaCell">#</a> MetaCell</h2><p>The project is inspired by <a href="https://github.com/danielfrg/pelican-ipynb">pelican-ipynb</a>, but do things the other way: MetaCell (i.e. Metadata Cell). 
With MetaCell, there is NO need to create another metadata file, or edit ipynb externally. Everything is inside Jupyter Notebook!</p>
<p>Exact Idea of MetaCell is:</p>
<blockquote><p><strong>All and Only</strong> Metadata should be stored at the first Cell of ipynb</p>
</blockquote>
<p>Writing a MetaCell is as simple as writting metadata in markdown file.</p>
<div class="highlight"><pre><span></span><span class="gh">#</span> This is title
+ date: 2020-02-22
+ tags: [hello, world]
</pre></div>
<p>Thanks to the markdown capability of ipynb, MetaCell will be shown like the following:</p>
<h3 id="This-is-title"><a class="anchor-link" href="#This-is-title">#</a> This is title</h3><ul>
<li>date: 2020-02-22</li>
<li>tags: [hello, world]</li>
</ul>
<p>So, MetaCell itself will even enhance the readability of your notebooks!</p>
<blockquote><p>Hint: In jupyter notebook, press <code>Esc+M</code> will switch selected cell to markdown mode.</p>
</blockquote>
<h2 id="Overview"><a class="anchor-link" href="#Overview">#</a> Overview</h2><p>The plugin is simple:</p>
<ul>
<li>The CSS of jupyter will not be taken into outputs</li>
<li>The summary will be generated by Pelican</li>
</ul>
<p>But it is still powerful and extensible:</p>
<ul>
<li>Math Support</li>
<li>A Solution for metadata</li>
<li>Several configurable preprocessors provided<ul>
<li>Metadata Extraction</li>
<li>SubCell Selection</li>
<li>Ignore cells with <code>#ignore</code> tag</li>
<li>Empty Cell Removal</li>
</ul>
</li>
<li>You can change <a href="preprocess.py">preprocess.py</a> and define your own preprocessors</li>
</ul>
<h2 id="Preprocessors"><a class="anchor-link" href="#Preprocessors">#</a> Preprocessors</h2><h3 id="Metadata-Extraction"><a class="anchor-link" href="#Metadata-Extraction">#</a> Metadata Extraction</h3><p>As we stated, <strong>All and Only</strong> Metadata should be stored at the first Cell of ipynb. If there is non-metadata content found, it will raise an exception. After the extraction of metadata, the <strong>MetaCell will be removed</strong>, as we have extracted all the information.</p>
<h3 id="SubCells-Selection"><a class="anchor-link" href="#SubCells-Selection">#</a> SubCells Selection</h3><p>The Subcells preprocessor is executed after Metadata preprocessor (Th MetaCell it self will be removed by Metadata preprocessor), so
<strong>zeroth cell is the first cell after MetaCell</strong>. The start and end should be written in the MetaCell like:</p>
<div class="highlight"><pre><span></span><span class="gh">#</span> This is title
+ date: 2020-02-22
+ tags: [hello, world]
+ subcells: [5, -1]
</pre></div>
<p>The value will be evaluated by <code>start, end = ast.literal_eval(value)</code>. And then cells are sliced by <code>cells[start:end]</code>.</p>
<blockquote><p>Hint: If you want end to be infinity, use None</p>
</blockquote>
<h3 id="#ignore-Tag"><a class="anchor-link" href="##ignore-Tag">#</a> #ignore Tag</h3><p>You can include an <code>#ignore</code> comment at the beginning
of a cell of the Jupyter notebook to ignore it, removing it from the post content.</p>
<p>Note it is more strict than <code>#ignore</code> tag in pelican-ipynb. The purpose is to prevent kicking normal contents out of post content.</p>
<h3 id="Remove-Empty-Cells"><a class="anchor-link" href="#Remove-Empty-Cells">#</a> Remove Empty Cells</h3><p>Remove trivial cells without visible characters using regular expression <code>\S</code></p>
<h2 id="Installation"><a class="anchor-link" href="#Installation">#</a> Installation</h2><h3 id="Dependency"><a class="anchor-link" href="#Dependency">#</a> Dependency</h3><ul>
<li>Currently works for <code>python3</code> only</li>
<li>pelican</li>
<li>nbconvert</li>
<li>jupyter</li>
<li>ipython
Download this repo and put all the .py files it into an ipynb directory into your plugins directory.</li>
</ul>
<p>In the <code>pelicanconf.py</code></p>
<div class="highlight"><pre><span></span><span class="n">MARKUP</span> <span class="o">=</span> <span class="p">(</span><span class="s1">'md'</span><span class="p">,</span> <span class="s1">'ipynb'</span><span class="p">)</span>
<span class="n">PLUGIN_PATH</span> <span class="o">=</span> <span class="s1">'pelican-plugins'</span>
<span class="n">PLUGINS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'pelican-plugins'</span><span class="p">]</span>
</pre></div>
<h2 id="Options"><a class="anchor-link" href="#Options">#</a> Options</h2><table>
<thead><tr>
<th>Option</th>
<th>Default</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>IPYNB_REMOVE_EMPTY</td>
<td>True</td>
<td>Remove Empty Cells, <code>True</code> by default</td>
</tr>
<tr>
<td>IPYNB_IGNORE</td>
<td>True</td>
<td>Remove cells with <code>#ignore</code> tag at the beginning</td>
</tr>
<tr>
<td>IPYNB_SUBCELLS</td>
<td>True</td>
<td>Only preserve Subcells specified by <code>subcells: [begin, end)</code> metadata</td>
</tr>
</tbody>
</table>
<h2 id="TODO"><a class="anchor-link" href="#TODO">#</a> TODO</h2><ul>
<li>Fix the inperfect environment support?</li>
<li>Syntax highlight for markdown cells</li>
</ul>
<h2 id="Acknowledgement"><a class="anchor-link" href="#Acknowledgement">#</a> Acknowledgement</h2><p>Thanks to <a href="https://github.com/danielfrg/pelican-ipynb">pelican-ipynb</a>! From reading the code of the project, I have learned how to write a similiar plugin with my own ideas.</p>
</div>
</div>
</div>

            </div>
            <!-- /.entry-content -->
<ul class="pager">
    <li class="previous"><a href="https://www.peijun.me/next-permutation.html">&larr; Next Permutation</a></li>
    <li class="next"><a href="https://www.peijun.me/blogging-with-jupyter-and-pelican.html">Blogging with Jupyter and Pelican &rarr;</a></li>
</ul><section class="well" id="related-posts">
    <h4>Related Posts:</h4>
    <ul>
        <li><a href="https://www.peijun.me/blogging-with-jupyter-and-pelican.html">Blogging with Jupyter and Pelican</a></li>
        <li><a href="https://www.peijun.me/jupyter-conf.html">Jupyter Notebook的配置</a></li>
        <li><a href="https://www.peijun.me/reduced-density-matrix-and-partial-trace.html">Reduced density matrix and partial trace</a></li>
        <li><a href="https://www.peijun.me/24-game-solver.html">24 Game Solver</a></li>
        <li><a href="https://www.peijun.me/python-plotting-with-infinite-incontinuous-point.html">Python plotting with infinite incontinuous point</a></li>
    </ul>
</section>
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'peijunz'; // required: replace example with your forum shortname

                    var disqus_identifier = 'ipynb-plugin';
                var disqus_url = 'https://www.peijun.me/ipynb-plugin.html';

            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
<script>
    window.MathJax = {
      tex: {
        tags: 'ams',
        inlineMath: [ ['$','$'] ],
        displayMath: [ ['$$','$$'] ],
        processEscapes: true,
        processEnvironments: true,
        packages: {'[+]': ['noerrors']}
      },
      loader: {
        load: ['[tex]/noerrors']
      }
    };
</script>
<script type="text/javascript" id="MathJax-script"
async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        </article>
    </section>

        </div>
    </div>
</div>
<!-- End Content Container -->

<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">
         <i class="fa fa-github fa-lg"></i> <a href="https://github.com/peijunz">peijunz</a><br><br>
&copy; 2020 Peijun Zhu
             &middot; Powered by <a href="https://github.com/peijunz/ipynb2pelican" target="_blank">ipynb2pelican</a>, <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>
<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<p>
  <span id="busuanzi_container_site_pv"><small>
  Total Views: <span id="busuanzi_value_site_pv"></span>,
  Visitors: <span id="busuanzi_value_site_uv"></span>,
  Current: <span id="busuanzi_value_page_pv"></span></small>
  </span>
<p>
                <p><small>  <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.en"><img alt="Creative Commons License" style="border-width:0" src="//i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
    Content
  licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.en">Creative Commons Attribution-ShareAlike 4.0 International License</a>, except where indicated otherwise.
</small></p>
         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script type="text/javascript">
    function changeThemeColor() {
        var elements = document.getElementsByClassName('navbar-fixed-top');
        if(elements){
        	var theme_color = window.getComputedStyle(elements[0], null).color;
            var metaThemeColor = document.querySelector("meta[name=theme-color]");
            metaThemeColor.setAttribute("content", theme_color);
        }
    };
    changeThemeColor();
</script>
<script src="https://www.peijun.me/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://www.peijun.me/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://www.peijun.me/theme/js/respond.min.js"></script>


    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'peijunz'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-96594625-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->


</body>
</html>